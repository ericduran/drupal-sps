<?php
class SPSTestPluginControllerUnitTest extends SPSBaseUnitTest {
  static function getInfo() {
    return array(
      'name' => 'SPS Test Plugin Controller Unit Tests',
      'description' => 'Test the public interface to the TestPluginContrller object',
      'group' => 'SPS',
    );
  }

  public function testTestPluginController() {
    $info = array(
      'widget' => array(
        'test_widget' => array(
          'class' => '\Drupal\sps\Test\Override',
          'instance_settings' => array(),
        ),
      ),
    );
    $controller = new \Drupal\sps\Test\PluginController($info);
    $this->assertEqual(
      $controller->getPluginInfo('widget'), 
      $info['widget'], 
      "TestStorageController::getPluginInfo should get me all of the plugin infos for that type if i only pass it one param", 'SPS'
    );
    $this->assertEqual(
      $controller->getPluginInfo('widget', 'test_widget'), 
      $info['widget']['test_widget'], 
      'TestStorageController::getPluginInfo should get the plugin info for  the plugin when passed two param', 'SPS'
    );
    $this->assertEqual(
      $controller->getPlugin('widget', 'test_widget', new StdClass()), 
      new \Drupal\sps\Test\Override(array(), new StdClass()),
      'TestStorageController::getPlugin should build a obj from the plugin info', 'SPS'
    );

  }

}
